<!--
@license
Copyright (c) 2016 A-labs. All rights reserved.
/////////////////
LOCALS
/////////////////
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../locals-style/locals-style.html">
<link rel="import" href="../iron-input/iron-input.html">

<!--
Based on the paper-input element, this element uses the same structure but applies Locals-style to it.

Example:

    <locals-input></locals-input>

Example:

    <locals-input>
      <h2>Hello locals-input</h2>
    </locals-input>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="locals-input">
  <template>
    <style>
     :host {
        display: block;
        margin: 5px 0px 0px 0px;
        --input-color: darkgrey;
        width: 100%;
        max-width: 100%;
      }

      .total {
        position: relative;
        box-sizing: border-box;
        @apply(--layout-vertical);
        @apply(--opensans-reg);
        z-index: 0;
      }

      .label {
        font-size: 12px;
        z-index: -1;
        box-sizing: border-box;
        padding: 5px 5px 0px 0px;
        color:var(--locals-darkgrey);
      }

      input {
        @apply(--opensans-reg);
        color:var(--locals-darkgrey);
        outline-width: 0;
        outline: none;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        border: none;
        z-index: 0;
        box-sizing: border-box;
        padding: 8px;
        font-size: 16px;
      }

      .withcontent input {
        border-bottom: 2px solid rgba(0,0,0,0.075);
        background-color: rgba(0,0,0,0);
      }


      .nocontent input {
        background-color: rgba(0,0,0,0.04);
      }


      .outfocus input {
        box-sizing: border-box;
        @apply(--opensans-reg);
      }

      .outfocus label {
        -webkit-transition: -webkit-transform 0.15s;
        transition: transform 0.15s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        -webkit-transform: translateY(0%) translateX(0px) scale(1);
        transform: translateY(0%) translateX(0px) scale(1);
      }

      .infocus input {
        box-sizing: border-box;
        border-bottom: 2px solid var(--input-color);
        transition: background-color 0.15s;
        background-color: rgba(0,0,0,0);
        @apply(--opensans-semibold);
        margin-top: 4px;
      }

      .infocus label {
        color: var(--input-color);
        @apply(--opensans-reg);
        -webkit-transition: -webkit-transform 0.15s;
        transition: transform 0.15s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        -webkit-transform: translateY(0%) translateX(8px) scale(1.15);
        transform: translateY(0%) translateX(8px) scale(1.15);
        padding: 5px 5px 0px 0px;
      }


      .withcontent label {
        color: lightgrey;
      }


/*      .nocontent input {
        background-color: rgba(0,0,0,0.04);
      }

      .withcontent input {
        background-color: transparent;
        border: 2px solid rgba(0,0,0,0.04);
      }*/

    </style>
    <div class$="{{focusclass}} {{contentclass}} total">
      <label class="label">[[label]]</label>
      <input is="iron-input" bind-value="{{inputvalue}}" placeholder$="[[placeholder]]">
    </div>
  </template>

  <script>
    Polymer({
      is: 'locals-input',

      behaviors: [
      ],

      properties: {

        color: {
          type:String,
          value: 'darkgrey',
          observer: '_color'
        },

        inputvalue: {
          type: String,
          value: ''
        }
      },

      _inputvalue: function (){
        if(this.inputvalue){
          console.log('Er staat wel degelijk iets in!', this.inputvalue);
          this.contentclass = 'withcontent';
        } else {
          this.contentclass = 'nocontent';
        }

      },


      ready: function() {
        this.addEventListener('focus', this._boundtoFocus, true);
        this.addEventListener('blur', this._boundtoBlur, true);
          this._inputvalue();

      },

      attached: function() {
      },

      detached: function() {
      },

      _boundtoFocus: function(){
          this.focusclass = 'infocus';
      },

      _boundtoBlur: function(){
          this.focusclass = 'outfocus';
          this._inputvalue();
      },

      _color: function(){
        this.inputcolor = 'var(--locals-'+this.color+')';
        this.customStyle['--input-color'] = this.inputcolor;
        this.updateStyles();
      }



    });
  </script>
</dom-module>
